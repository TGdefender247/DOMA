<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DOMA SHOP - Безопасные переходы</title>
<style>
  body {
    background: black;
    color: white;
    font-family: 'Share Tech Mono', monospace;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }
  #container {
    display: flex;
    gap: 20px;
  }
  button {
    background: transparent;
    border: 2px solid white;
    color: white;
    padding: 12px 28px;
    cursor: pointer;
    border-radius: 8px;
    font-size: 1.2rem;
    text-shadow: 0 0 5px white;
    transition: 0.3s;
  }
  button:hover {
    background: white;
    color: black;
    box-shadow: 0 0 15px white;
  }
</style>
</head>
<body>

<div id="container"></div>

<script>
  // Настоящие ссылки
  const realLinks = {
    "БОТ": "https://t.me/Doma111_bot",
    "НОВОСТИ": "https://t.me/+r_YNyC6D2BljMzcy",
    "ОТЗЫВЫ": "https://t.me/+6LPNuuSTKzMyMmJi",
    "ЧАТ": "https://t.me/+2h-o-940Sj42Yjdh"
  };

  // Генерация фейковых ссылок для отображения
  function generateFakeUrl(label) {
    const randomId = Math.random().toString(36).substring(2, 10);
    return https://fake-domain.fake/${label.toLowerCase()}_${randomId};
  }

  const container = document.getElementById('container');

  function openFakeAndRedirect(realUrl, fakeUrl) {
    // Создаём HTML страницы с редиректом
    const redirectHTML = `
<!DOCTYPE html>
<html lang="ru">
<head><meta charset="UTF-8"><title>Переадресация</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  body { background:black; color:#0f0; font-family: monospace; display:flex; justify-content:center; align-items:center; height:100vh; margin:0;}
</style>
</head>
<body>
  <div>Переадресация... Пожалуйста, подождите.</div>
  <script>
    // Через 50 мс редирект на реальную ссылку
    setTimeout(() => {
      window.location.replace(${JSON.stringify(realUrl)});
    }, 50);
  <\/script>
</body>
</html>
`;

    const blob = new Blob([redirectHTML], { type: 'text/html' });
    const blobUrl = URL.createObjectURL(blob);

    // Открываем новую вкладку с фейковым URL (blobUrl), но в адресной строке покажем фейковую ссылку (fakeUrl) через history API
    // Запускаем эту вкладку с фейковым URL, и сразу меняем URL в истории на фейковый (fakeUrl)
    // Для этого нужно сначала открыть пустую вкладку, потом уже написать туда скрипт
    const newWin = window.open('', '_blank', 'noopener,noreferrer');

    if (!newWin) {
      alert('Пожалуйста, разрешите открывать новые окна для перехода.');
      return;
    }

    // Записываем в новую вкладку документ с редиректом
    newWin.document.write(redirectHTML);
    newWin.document.close();

    // Через 10 мс меняем URL в истории на фейковый (без перезагрузки страницы)
    setTimeout(() => {
      try {
        newWin.history.replaceState(null, '', fakeUrl);
      } catch(e) {
        // Иногда браузеры блокируют — ничего страшного
        console.warn('Не удалось заменить URL в истории', e);
      }
    }, 10);
  }

  Object.entries(realLinks).forEach(([label, realUrl]) => {
    const btn = document.createElement('button');
    const fakeUrl = generateFakeUrl(label);

    btn.textContent = label;
    btn.title = fakeUrl;

    btn.onclick = () => openFakeAndRedirect(realUrl, fakeUrl);

    container.appendChild(btn);
  });
</script>

</body>
</html>
